{% extends "layout/basic.html" %}
{% block content %}
{{ set(UiContext, 'pdoc', pdoc) }}
<div class="row">
  <div class="medium-9 columns">
    <div class="section">
      <div class="section__header">
        <h1 class="section__title">ğŸ“Š ç»©æ•ˆå¡«æŠ¥</h1>
      </div>
      <div class="section__body typo" name="submit_section">
        <form method="post" enctype="multipart/form-data">
          <!-- æ‰‹åŠ¨æ·»åŠ CSRFä»¤ç‰Œ -->
          <input type="hidden" name="csrfToken" value="{{ handler.csrfToken }}">
          
          <!-- éšè—ä»£ç è¯­è¨€é€‰æ‹©ï¼ˆä¿ç•™ä½†éšè—ï¼‰ -->
          <div class="hasjs--hide" style="display: none;">
            {{ form.form_select({
                label:'Code language',
                options:langRange,
                name:'lang',
                value:handler.user.codeLang
              }) }}
          </div>
          <div class="row nojs--hide" id="codelang-selector" style="display: none;"></div>
          
          <!-- ç»©æ•ˆå¡«æŠ¥åŒºåŸŸ - ç®€åŒ–ç‰ˆæœ¬ -->
          <div class="row">
            <div class="medium-6 columns">
              <div class="form__item">
                <label class="form__label" style="font-weight: bold; color: #555;">
                  å®Œæˆæ•°å€¼
                </label>
                <input type="number" name="filledValue" placeholder="è¯·è¾“å…¥å®é™…å®Œæˆæ•°å€¼" class="textbox" style="background: white;" autofocus>
                <p class="help-text">è¯·æ ¹æ®KPIæŒ‡æ ‡è¦æ±‚å¡«å†™å®é™…å®Œæˆå€¼</p>
              </div>
            </div>
            <div class="medium-6 columns">
              <div class="form__item">
                <label class="form__label" style="font-weight: bold; color: #555;">
                  ç›®æ ‡å‚è€ƒå€¼
                </label>
                <input type="text" class="textbox" style="background: #f5f5f5;" value="{{ pdoc.targetValue|default('') }} {{ pdoc.unit|default('') }}" disabled>
                <p class="help-text">ç³»ç»Ÿé¢„è®¾ç›®æ ‡å€¼</p>
              </div>
            </div>
          </div>

          <!-- å®Œæˆæƒ…å†µè¯´æ˜ -->
          <div class="form__item" style="margin-top: 20px;">
            <label class="form__label" style="font-weight: bold; color: #555;">
              å®Œæˆæƒ…å†µè¯´æ˜
            </label>
            <textarea name="filledText" placeholder="è¯·è¯¦ç»†æè¿°å®Œæˆæƒ…å†µã€å·¥ä½œäº®ç‚¹ã€é‡åˆ°çš„å›°éš¾ç­‰..." class="textbox" style="height: 120px; background: white;"></textarea>
          </div>

          <!-- éšè—ä½†ä¿ç•™ä»£ç å­—æ®µï¼ˆåç«¯éœ€è¦ï¼‰ -->
          <div style="display: none;">
            {{ form.form_textarea({label:'Code', columns:12, name:'code', extra_class:'monospace', nospellcheck:true}) }}
            <textarea name="code" style="display: none;"></textarea>
          </div>

          <!-- è¯æ˜ææ–™ä¸Šä¼  -->
          <div class="form__item" style="margin-top: 20px;">
            <label class="form__label" style="font-weight: bold; color: #555;">
              è¯æ˜ææ–™
             <input type="file" name="evidenceFile" style="margin-top: 8px;">
            </label>

            <!-- <input type="file" name="file" class="textbox"> -->
            <p class="help-text">å¯ä¸Šä¼ å®Œæˆæƒ…å†µçš„æˆªå›¾ã€æ–‡æ¡£ã€æŠ¥è¡¨ç­‰è¯æ˜ææ–™</p>
          </div>

          <!-- æäº¤æŒ‰é’® -->
          <div class="form__item">
            <input type="submit" class="rounded primary button" value="ğŸ“¤ æäº¤ç»©æ•ˆ" style="margin-top: 20px;">
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="medium-3 columns">
    {% include "partials/problem_sidebar.html" %}
  </div>
</div>

<style>
/* éšè—ä»£ç ç›¸å…³å…ƒç´  */
#codelang-selector,
.textarea[name="code"],
.monospace {
  display: none !important;
}

/* ç¡®ä¿è¡¨å•å…ƒç´ å¯¹é½ */
.form__item {
  margin-bottom: 15px;
}

.form__label {
  display: block;
  margin-bottom: 8px;
}

.textbox {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
}

.help-text {
  margin: 5px 0 0 0;
  font-size: 0.85em;
  color: #666;
}

/* ç¡®ä¿ä¸¤ä¸ªè¾“å…¥æ¡†åœ¨åŒä¸€æ°´å¹³çº¿ */
.row .columns .form__item {
  height: 100%;
}
</style>
{% endblock %}